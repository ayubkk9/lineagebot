<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<AnchorPane prefHeight="600.0" prefWidth="800.0" styleClass="main-pane" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.lineagebot.BotUIController">
    <children>
        <TabPane prefHeight="600.0" prefWidth="800.0" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <Tab text="Действия">
                    <content>
                        <VBox spacing="10.0" styleClass="skill-pane">
                            <children>
                                <!-- Выбор персонажа -->
                                <HBox spacing="10.0" VBox.vgrow="ALWAYS">
                                    <children>
                                        <Label text="Ник персонажа:" />
                                        <TextField fx:id="characterNameField" prefWidth="150.0" />
                                        <Button fx:id="detectGameWindowButton" mnemonicParsing="false" onAction="#detectGameWindow" text="Найти окно" />
                                        <ComboBox fx:id="characterComboBox" prefWidth="250.0" visible="true" />
                                        <Button fx:id="refreshCharactersButton" mnemonicParsing="false" onAction="#refreshCharacters" text="Обновить" visible="true" />
                                        <Button fx:id="activateWindowButton" mnemonicParsing="false" onAction="#activateWindow" text="Активировать" />
                                    </children>
                                    <padding>
                                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </padding>
                                </HBox>

                                <!-- Выбор класса -->
                                <HBox spacing="10.0">
                                    <children>
                                        <Label text="Класс:" />
                                        <ComboBox fx:id="classComboBox" prefWidth="200.0" />
                                    </children>
                                    <padding>
                                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </padding>
                                </HBox>

                                <!-- Настройка действий -->
                                <HBox spacing="10.0">
                                    <children>
                                        <Label text="Действие/Скилл:" />
                                        <ComboBox fx:id="skillComboBox" prefWidth="200.0" promptText="Выберите скилл или действие" />
                                        <Label text="Клавиши:" />
                                        <TextField fx:id="keysField" prefWidth="150.0" />
                                        <Label text="Условие:" />
                                        <ComboBox fx:id="conditionComboBox" prefWidth="150.0" promptText="Выберите условие" />
                                        <Button fx:id="addActionButton" mnemonicParsing="false" onAction="#addAction" text="Добавить" />
                                        <Button fx:id="editActionButton" mnemonicParsing="false" onAction="#editAction" text="Редактировать" />
                                        <Button fx:id="deleteActionButton" mnemonicParsing="false" onAction="#deleteAction" text="Удалить" />
                                    </children>
                                    <padding>
                                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </padding>
                                </HBox>

                                <!-- Таблица действий -->
                                <TableView fx:id="actionsTable" prefHeight="200.0">
                                    <columns>
                                        <TableColumn fx:id="actionTypeColumn" prefWidth="250.0" text="Действие/Скилл" />
                                        <TableColumn fx:id="keysColumn" prefWidth="100.0" text="Клавиши" />
                                        <TableColumn fx:id="conditionColumn" prefWidth="150.0" text="Условие выполнения" />
                                    </columns>
                                </TableView>

                                <!-- Настройка HP/MP -->
                                <GridPane hgap="10.0" vgap="5.0">
                                    <children>
                                        <Label text="HP (%):" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                        <TextField fx:id="hpPercentField" prefWidth="60.0" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                        <Label text="HP:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                        <TextField fx:id="hpDisplayField" editable="false" prefWidth="60.0" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                                        <Button fx:id="selectHpBarButton" mnemonicParsing="false" onAction="#selectHpBar" text="Выбрать полосу HP" GridPane.columnIndex="4" GridPane.rowIndex="0" />
                                        <TextField fx:id="hpBarField" prefWidth="150.0" GridPane.columnIndex="5" GridPane.rowIndex="0" />

                                        <Label text="MP (%):" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                        <TextField fx:id="mpPercentField" prefWidth="60.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                        <Label text="MP:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                        <TextField fx:id="mpDisplayField" editable="false" prefWidth="60.0" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                                        <Button fx:id="selectMpBarButton" mnemonicParsing="false" onAction="#selectMpBar" text="Выбрать полосу MP" GridPane.columnIndex="4" GridPane.rowIndex="1" />
                                        <TextField fx:id="mpBarField" prefWidth="150.0" GridPane.columnIndex="5" GridPane.rowIndex="1" />

                                        <Label text="HP моба:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                        <Button fx:id="selectMobHpBarButton" mnemonicParsing="false" onAction="#selectMobHpBar" text="Выбрать полосу HP моба" GridPane.columnIndex="4" GridPane.rowIndex="2" />
                                        <TextField fx:id="mobHpBarField" prefWidth="150.0" GridPane.columnIndex="5" GridPane.rowIndex="2" />
                                    </children>
                                    <padding>
                                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </padding>
                                </GridPane>

                                <!-- Arduino и управление ботом -->
                                <HBox spacing="10.0">
                                    <children>
                                        <Label text="Порт Arduino:" />
                                        <ComboBox fx:id="arduinoPortComboBox" prefWidth="100.0" />
                                        <Button fx:id="startButton" mnemonicParsing="false" onAction="#startBot" text="Старт" />
                                        <Button fx:id="stopButton" mnemonicParsing="false" onAction="#stopBot" text="Стоп" />
                                        <Button fx:id="saveSettingsButton" mnemonicParsing="false" onAction="#saveSettings" text="Сохранить настройки" />
                                        <Button fx:id="loadSettingsButton" mnemonicParsing="false" onAction="#loadSettings" text="Загрузить настройки" />
                                    </children>
                                    <padding>
                                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </padding>
                                </HBox>

                                <!-- Лог -->
                                <TextArea fx:id="logArea" editable="false" prefHeight="150.0" wrapText="true" />
                            </children>
                            <padding>
                                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                            </padding>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </children>
</AnchorPane>